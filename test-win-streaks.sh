#!/bin/bash

# Script de Teste do Sistema de Win Streaks
# Este script simula opera√ß√µes para testar o sistema

echo "üî• === TESTE DO SISTEMA DE WIN STREAKS ==="
echo ""
echo "üìã O que este teste faz:"
echo "  1. Simula uma sequ√™ncia de vit√≥rias"
echo "  2. Testa o modo conservador"
echo "  3. Simula quebra de streak"
echo "  4. Testa progress√£o de n√≠veis"
echo ""
echo "‚ö†Ô∏è  Este √© um teste visual - abra o console do navegador para ver os logs"
echo ""

# Verificar se o servidor est√° rodando
if ! lsof -i:8080 > /dev/null 2>&1; then
    echo "‚ùå Servidor n√£o est√° rodando na porta 8080"
    echo "   Execute: npm run dev"
    exit 1
fi

echo "‚úÖ Servidor encontrado na porta 8080"
echo ""
echo "üåê Abra o navegador em: http://localhost:8080"
echo ""
echo "üìä Para visualizar o sistema:"
echo "  1. Abra a aplica√ß√£o no navegador"
echo "  2. Procure pelo card 'Sistema de Win Streaks'"
echo "  3. Gere sinais clicando em 'Gerar Sinal'"
echo "  4. Marque os sinais como WIN para aumentar a streak"
echo "  5. Observe o progresso em tempo real"
echo ""
echo "üéØ OBJETIVOS DO TESTE:"
echo "  - Atingir 15 vit√≥rias consecutivas (Meta inicial)"
echo "  - Ver modo conservador ativar em 70%+ do target"
echo "  - Observar progress√£o ao atingir meta"
echo "  - Novo target ser√° 20 vit√≥rias ap√≥s primeira meta"
echo ""
echo "üìù LOGS IMPORTANTES NO CONSOLE:"
echo "  üî• STREAK ATUAL: X/15 (Y%)"
echo "  ‚úÖ PADR√ÉO FORTE DETECTADO"
echo "  üéØ TARGET ATINGIDO!"
echo "  üìà PROGRESS√ÉO! N√≠vel X"
echo "  ‚ùå STREAK QUEBRADA"
echo ""

read -p "Pressione ENTER para abrir o navegador..."

# Tentar abrir o navegador
if command -v xdg-open > /dev/null; then
    xdg-open "http://localhost:8080"
elif command -v open > /dev/null; then
    open "http://localhost:8080"
else
    echo "Por favor, abra manualmente: http://localhost:8080"
fi

echo ""
echo "üéÆ COMO TESTAR:"
echo ""
echo "1Ô∏è‚É£  AUMENTAR STREAK:"
echo "   - Clique em 'Gerar Sinal'"
echo "   - Marque como WIN (‚úì)"
echo "   - Repita v√°rias vezes"
echo "   - Observe a barra de progresso aumentar"
echo ""
echo "2Ô∏è‚É£  MODO CONSERVADOR (ap√≥s 10+ vit√≥rias):"
echo "   - Sistema ficar√° mais seletivo"
echo "   - Probabilidade m√≠nima aumenta"
echo "   - Apenas padr√µes testados s√£o permitidos"
echo "   - Alerta visual aparecer√° no card"
echo ""
echo "3Ô∏è‚É£  ATINGIR META (15 vit√≥rias):"
echo "   - Card celebra com anima√ß√£o"
echo "   - Conquista √© desbloqueada"
echo "   - N√≠vel aumenta"
echo "   - Novo target: 20 vit√≥rias"
echo ""
echo "4Ô∏è‚É£  QUEBRAR STREAK:"
echo "   - Marque um sinal como LOSS (‚úó)"
echo "   - Veja an√°lise da causa no console"
echo "   - Sistema aprende com o erro"
echo "   - Streak reinicia do zero"
echo ""
echo "üí° DICA: Abra o Console do Navegador (F12) para ver todos os logs!"
echo ""
echo "üîç VERIFICA√á√ïES AUTOM√ÅTICAS:"
echo "  - Sistema rastreia cada WIN/LOSS"
echo "  - Calcula probabilidade ideal automaticamente"
echo "  - Ajusta thresholds baseado em performance"
echo "  - Refor√ßa padr√µes de sucesso"
echo "  - Penaliza padr√µes de falha"
echo ""
echo "üìä ESTAT√çSTICAS DISPON√çVEIS:"
echo "  - Streak Atual"
echo "  - Recorde Pessoal"
echo "  - Target Atual"
echo "  - N√≠vel de Progress√£o"
echo "  - Hist√≥rico de Streaks"
echo "  - Conquistas Desbloqueadas"
echo ""
echo "‚ú® O sistema est√° pronto para uso!"
echo "   Boa sorte alcan√ßando streaks longas! üöÄ"
